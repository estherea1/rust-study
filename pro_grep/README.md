# 创建grep：Globally search a Regular Expression adn Print

1. 获取一个文件路径和一个字符串作为参数
2. 读取文件并找到其中包含字符串参数的行
3. 打印出这些行

> 在这个过程中，我们会展示如何让我们的命令行工具利用很多命令行工具中用到的终端功能。读取环境变量来使得用户可以配置工具的行为。打印到标准错误控制流（stderr）而不是标准输出（stdout），例如这样用户可以选择将成功输出重定向到文件中的同时仍然在屏幕上显示错误信息。

包含内容：
- 代码组织（使用 第七章 学习的模块）
- vector 和字符串（第八章，集合）
- 错误处理（第九章）
- 合理的使用 trait 和生命周期（第十章）
- 测试（第十一章）
- 闭包（第十三章）
- 迭代器&trait对象（第十七章）

## 接受命令行参数

> **Crates.io 上有一些现成的库可以帮助我们接受命令行参数**，这里我们自己实现。

### Reading the Argument Values 读取参数值

`std::env::args`：返回一个迭代器（iterator）———— 传递给程序的命令行参数的 

- 迭代器生成一系列的值
- 可以在迭代器上调用 collect 方法将其转换为一个集合：比如包含所有迭代器产生元素的vector

`std::env::args_os`：`std::env::args`在任何参数包含无效Unicode字符时会panic。`std::env::args_os`返回OsString值而不是String值。出于简单考虑使用了 std::env::args，因为 **OsString 值每个平台都不一样而且比 String 值处理起来更为复杂**。

"target/debug/minigrep":二进制文件的名称。

这与 C 中的参数列表的行为一致：让程序使用在执行时调用它们的名称。如果要在消息中**打印它**或者根据用于**调用程序的命令行别名更改程序**的行为，通常可以**方便地访问程序名称**，不过考虑到本章的目的，我们将忽略它并只保存所需的两个参数。

### 将参数值保存进变量

用数组`&args[1]``&args[2]`读取参数

## 读取文件

增加读取由 file_path 命令行参数指定的文件的功能。

## 重构改进模块性和错误处理

四个问题：

1. main：多个任务，最好能分离出功能以便每个函数就负责一个任务。
2. query和file_path

